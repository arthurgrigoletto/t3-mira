// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL")
    relationMode = "prisma"
}

generator client {
    provider = "prisma-client-js"
}

model Group {
    id                  String        @id @default(cuid())
    name                String
    slug                String        @unique
    administrator_id    String
    administrator_email String
    event_date          DateTime?
    draw_date           DateTime?
    limit_value         Int?
    start_value         Int?          @default(0)
    created_at          DateTime      @default(now())
    updated_at          DateTime      @updatedAt
    participants        Participant[]

    @@index([administrator_id, administrator_email])
    @@map("groups")
}

model Participant {
    id                 String   @id @default(cuid())
    name               String
    slug               String
    email              String
    resend_email_times Int      @default(0)
    created_at         DateTime @default(now())
    updated_at         DateTime @updatedAt

    group    Group  @relation(fields: [group_id], references: [id], onDelete: Cascade)
    group_id String

    @@index([group_id])
    @@map("participants")
}
